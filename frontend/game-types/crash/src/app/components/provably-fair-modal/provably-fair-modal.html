<div
  class="modal bg-black/90 fixed top-0 left-0 w-full h-full flex items-center justify-center p-4 xl:p-16"
  aria-label="Modal container">
  <div class="w-full max-w-3xl sm:mt-0 min-h-[400px] max-h-full flex flex-col panel-gradient-bg border-2 border-white/10 rounded-2xl animated-modal" role="main">
    <header class="modal-header" aria-label="Modal header" role="heading">
      <div
        class="modal-title py-4 px-4 xl:px-8 xl:text-lg border-b border-1 border-white/10 flex items-center justify-between relative">
        <div class="title text-white uppercase font-bold">{{ 'provably-settings.settings-title' | translate  }}</div>
        <div (click)="closeModal()"
          class="btn close-modal text-2xl xl:text-4xl cursor-pointer absolute right-4 xl:right-8 text-white/50 hover:text-white transition-colors"
          aria-label="Close modal">
          &times;
        </div>
      </div>
    </header>

    <section class="modal-content flex-1 overflow-y-auto py-4 px-4 xl:py-4 xl:px-6 text-[color:#b0b0b0]" aria-label="Modal content" role="">
      <div class="grid divide-y divide-white/10 grid-cols-1 text-left justify-between items-stretch text-xs md:text-sm"
        role="contentinfo">
        <div class="flex flex-col gap-6 tabular-nums">

          <div class="flex flex-col gap-4">
            <div class="top  flex items-center gap-4">
              <img src="assets/icons/laptop.png" alt="" class="w-9 xl:w-11" />
              <div class="flex flex-col">
                <div class="font-bold text-white">{{ 'provably-settings.client-your' | translate  }}:</div>
                <div class="text-white/50">{{ 'provably-settings.client-txt' | translate  }}.</div>
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 items-star mt-4">

              <div class="flex flex-col gap-3">
                <div class="text-white font-bold flex gap-4 items-center">
                  <div
                    (click)="setManualClientSeed(false)"
                    class="flex btn items-center justify-center size-6 rounded-full cursor-pointer border border-1 border-white bg-black ">
                    <div *ngIf="!(manualSeedMode$ | async)" class="size-4 bg-white  rounded-full"></div>
                  </div>
                  <span>{{ 'provably-settings.random' | translate  }}</span>
                </div>
                <div
                  class="bg-black flex items-center justify-between rounded-md px-8 py-4 text-white relative gap-4 overflow-hidden">
                  <span class="text-ellipsis overflow-hidden">{{clientSeed}}</span>
                  <div class="btn copy-button bg-[#222] p-2 cursor-pointer rounded hover:opacity-80 relative"
                    (click)="handleCopy(clientSeed, 'clientSeed')">
                    <div *ngIf="copiedId === 'clientSeed'"
                      class="absolute top-0 -left-2 -translate-x-full text-[10px] px-2 py-1 rounded bg-[#333]">
                      {{ 'copied' | translate }}!
                    </div>
                    <img src="assets/icons/copy.png" class="w-3 md:w-6" alt="">
                  </div>
                </div>
              </div>

              <div class="flex flex-col gap-3">
                <div class="text-white font-bold flex gap-4 items-center">
                  <div
                  (click)="setManualClientSeed(true)"
                    class="flex btn items-center justify-center size-6 rounded-full cursor-pointer border border-1 border-white bg-black">
                    <div *ngIf="(manualSeedMode$ | async)" class="size-4 bg-white  rounded-full"></div>
                  </div>
                  <span>{{ 'provably-settings.manually' | translate  }}</span>
                </div>
                <div class="flex flex-col">
                  <div
                    class="bg-black opacity-50 cursor-default flex items-center rounded-md px-8 py-4 text-white relative gap-4 overflow-hidden">
                    <span class="text-ellipsis overflow-hidden">{{clientSeed}}</span>
                  </div>
                  <button class="btn btn-gradient-bg px-2 py-1 rounded text-xs mt-1 ml-auto text-white"
                    (click)="openSeedEdit()" [disabled]="!(manualSeedMode$ | async)"> {{ 'provably-settings.change' | translate  }} </button>
                </div>
              </div>

            </div>
          </div>
          <div class="flex flex-col gap-4">
            <div class="top  flex items-center gap-4">
              <img src="assets/icons/server-icon.png" alt="" class="w-9 xl:w-11" />
              <div class="flex flex-col">
                <div class="font-bold text-white">{{ 'provably-settings.server' | translate  }}:</div>
                <div class="text-white/50">{{ 'provably-settings.server-txt' | translate  }}.</div>
              </div>
            </div>
            <div class="bg-black flex items-center rounded-md px-8 py-4 text-white relative gap-4 overflow-hidden">
              <span class="text-ellipsis overflow-hidden">{{serverSeedHash?.hash}}</span>
              <div class="btn copy-button bg-[#222] p-2 cursor-pointer rounded hover:opacity-80 relative"
                (click)="handleCopy(serverSeedHash?.hash, 'serverSeed')">
                <div *ngIf="copiedId === 'serverSeed'"
                  class="absolute top-0 -left-2 -translate-x-full text-[10px] px-2 py-1 rounded bg-[#333]">
                  {{ 'copied' | translate }}!
                </div>
                <img src="assets/icons/copy.png" class="w-3" alt="">
              </div>
            </div>
          </div>

          <div class="text-white/70">{{ 'provably-settings.check-fair' | translate  }}</div>
          <div class="flex gap-4 items-center text-white font-bold underline cursor-pointer btn" (click)="openInfoModal()">
            <img src="assets/icons/faur.png" alt="">
            <span>{{ 'provably-settings.what' | translate  }}</span>
          </div>
        </div>
      </div>

    </section>

  </div>
</div>

<div *ngIf="isModalOpen" class="fixed inset-0 z-50">
  <provably-fair-info-modal (close)="closeInfoModal()"></provably-fair-info-modal>
</div>

<div *ngIf="isSeedEditOpen" class="fixed inset-0 z-50">
  <div class="modal bg-black/40 fixed pt-40 left-0 w-full h-full flex items-start justify-center p-4"
    aria-label="Modal container">
    <div class="w-full max-w-xl panel-gradient-bg border-2 border-white/10 rounded-2xl animated-modal" role="main">
      <header class="modal-header" aria-label="Modal header" role="heading">
        <div
          class="modal-title py-2.5 px-2 border-b border-1 border-white/10 flex items-center justify-between relative">
          <div class="title text-white text-sm uppercase font-bold">{{ 'provably-settings.change-seed' | translate  }}</div>
          <div (click)="closeSeedEdit()"
            class="btn close-modal text-2xl xl:text-4xl cursor-pointer absolute right-4 xl:right-8 text-white/50 hover:text-white transition-colors"
            aria-label="Close modal">
            &times;
          </div>
        </div>
      </header>


      <section class="modal-content py-8 px-4 xl:py-4 xl:px-6 text-[color:#b0b0b0]">

        <!-- Input -->
        <input type="text" [(ngModel)]="seedValue" class="w-full rounded-md px-4 py-2 text-sm text-black"
          placeholder="Enter at least 16 characters" />

        <!-- Validation message -->
        <div *ngIf="!isValidSeed(seedValue)" class="text-red-500 text-xs mt-1">
          {{ 'provably-settings.seed-chars' | translate  }}.
        </div>

        <!-- Buttons -->
        <div class="flex justify-between gap-2 mt-6 text-xs">
          <!-- <button type="button" class="bg-gray-600 px-3 py-1 rounded text-white" (click)="generateRandomSeed()">
            Random
          </button> -->
          
          <div>
            <button type="button" class="btn-gradient-bg px-3 py-1 rounded mr-2 text-white"
              [disabled]="!isValidSeed(seedValue)" (click)="saveSeed()">
              {{ 'provably-settings.save' | translate  }}
            </button>

            <button type="button" class="bg-red-600 px-3 py-1 rounded text-white" (click)="cancelSeedEdit()">
              {{ 'provably-settings.cancel' | translate  }}
            </button>
          </div>
        </div>

        
      </section>


    </div>
  </div>

</div>